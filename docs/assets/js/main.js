"use strict";const ulElement=document.querySelector(".js_listUl"),url="https://api.disneyapi.dev/character",ulFavorites=document.querySelector(".js_characterFavorite"),inputSearch=document.querySelector(".js_search"),btnSearch=document.querySelector(".js_btnSearch");let listCharacterApi=[],nextPageUrl="http://api.disneyapi.dev/character?page=2&pageSize=50",listCharacterFavorite=[];const characterLocalStorage=JSON.parse(localStorage.getItem("character"));console.log(characterLocalStorage);const characterLocalStorageFavorite=JSON.parse(localStorage.getItem("favorite"));function init(){characterLocalStorage?(listCharacterApi=characterLocalStorage,renderCharacterList(listCharacterApi),characterLocalStorageFavorite&&(listCharacterFavorite=characterLocalStorageFavorite,renderFavoriteList(listCharacterFavorite))):fetch(url).then(e=>e.json()).then(e=>{console.log(e),listCharacterApi=e.data,console.log(listCharacterApi),renderCharacterList(listCharacterApi),nextPageUrl=e.next,renderFavoriteList(listCharacterFavorite),localStorage.setItem("character",JSON.stringify(listCharacterApi))})}function localNextPage(){nextPageUrl&&fetch(nextPageUrl).then(e=>e.json()).then(e=>{console.log(listCharacterApi),listCharacterApi=listCharacterApi.concat(e.data),console.log(listCharacterApi),renderCharacterList(listCharacterApi),nextPageUrl=e.next,localStorage.setItem("character",JSON.stringify(listCharacterApi))})}function renderCharacterList(e){ulElement.innerHTML="";for(const r of e)ulElement.innerHTML+=renderCharacter(r);addEventId()}function addEventId(){const e=document.querySelectorAll(".js_card");for(const r of e)r.addEventListener("click",handleClick)}function renderCharacter(e){e.imageUrl;return`<li class = "card js_card" id=${e._id}>\n      <div class="character">\n        <img class="character__img js_imgCard" src=${e.imageUrl} alt="">\n        <p class="character__text js_textCard">${e.name}</p>\n      </div>\n  </li>`}function handleClick(e){const r=parseInt(e.currentTarget.id),t=listCharacterApi.find(e=>e._id===r),a=listCharacterFavorite.findIndex(e=>e._id===r);-1===a?listCharacterFavorite.push(t):listCharacterFavorite.splice(a,0),localStorage.setItem("favorite",JSON.stringify(listCharacterFavorite)),renderFavoriteList()}function renderFavoriteList(){ulFavorites.innerHTML="";for(const e of listCharacterFavorite)ulFavorites.innerHTML+=renderCharacter(e)}console.log(characterLocalStorageFavorite),init(),localNextPage();const handleClickSearch=e=>{e.preventDefault();const r=inputSearch.value,t=listCharacterApi.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));console.log(t),renderCharacterList(t)};btnSearch.addEventListener("click",handleClickSearch);const liElements=document.querySelectorAll(".js_card"),btnTrash=document.querySelector(".js_btnTrash"),handleClickTrash=()=>{listCharacterFavorite.length>0&&listCharacterFavorite.shift(1),renderFavoriteList()};btnTrash.addEventListener("cliclk",handleClickTrash);