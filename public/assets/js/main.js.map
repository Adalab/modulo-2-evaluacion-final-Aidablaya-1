{"version":3,"sources":["01_list.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\r\n\r\n//variables globales\r\nconst ulElement =document.querySelector('.js_listUl');\r\nconst url = 'https://api.disneyapi.dev/character';\r\nconst ulFavorites =document.querySelector('.js_characterFavorite');\r\nconst inputSearch= document.querySelector('.js_search');\r\nconst btnSearch = document.querySelector('.js_btnSearch');\r\n\r\nlet listCharacterApi = [];\r\nlet nextPageUrl= 'http://api.disneyapi.dev/character?page=2&pageSize=50';\r\n\r\nlet listCharacterFavorite = [];\r\n\r\n//verificar si hay cosas en el localStorage\r\nconst characterLocalStorage = JSON.parse(localStorage.getItem('character'));\r\nconsole.log (characterLocalStorage);\r\nconst characterLocalStorageFavorite = JSON.parse(localStorage.getItem('favorite'));\r\nconsole.log (characterLocalStorageFavorite);\r\n\r\n/////////////////////////////////////////////////////////FETCH DISNEY/////////////////////////////\r\n\r\nfunction init () {\r\n  if (characterLocalStorage) {\r\n    listCharacterApi = characterLocalStorage;\r\n    renderCharacterList(listCharacterApi);\r\n  if (characterLocalStorageFavorite) {\r\n    listCharacterFavorite = characterLocalStorageFavorite;\r\n    renderFavoriteList(listCharacterFavorite);\r\n  }\r\n  } else {\r\n    fetch(url)\r\n      .then((response)=> response.json())\r\n      .then((data)=> {  \r\n        console.log(data);\r\n        listCharacterApi = data.data; \r\n\r\n        console.log (listCharacterApi);\r\n        renderCharacterList(listCharacterApi);\r\n        //añadido para poner paginación\r\n        nextPageUrl= data.next;\r\n        renderFavoriteList(listCharacterFavorite);\r\n        //coger dato para guardarlos\r\n        localStorage.setItem('character', JSON.stringify(listCharacterApi));\r\n        \r\n})\r\n  }\r\n};\r\n\r\ninit();\r\n\r\n\r\n\r\n//function para mostrar la siguiente pagina\r\nfunction localNextPage() {\r\n  if (nextPageUrl) {\r\n    fetch(nextPageUrl)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        console.log (listCharacterApi);\r\n        listCharacterApi = listCharacterApi.concat(data.data);\r\n        console.log (listCharacterApi);\r\n        renderCharacterList(listCharacterApi);\r\n        nextPageUrl = data.next;\r\n        localStorage.setItem('character', JSON.stringify(listCharacterApi));\r\n      })\r\n      ///ejecutar funcion\r\n  }\r\n};\r\n\r\nlocalNextPage();\r\n\r\n//////////////////////////////////////////////FUNCIONES//////////////////////////////////////////////////////////////////////////////\r\n\r\n//función renderizar toda la lista de characters//recorrer array\r\nfunction renderCharacterList(listData){\r\n    ulElement.innerHTML = '';\r\n    for(const character of listData){\r\n      ulElement.innerHTML += renderCharacter(character);      \r\n    }\r\n    addEventId();      \r\n    }\r\n;\r\n\r\n//recorro elemento li\r\nfunction addEventId() {\r\n  const liElements = document.querySelectorAll('.js_card');  \r\n    //necesito otro bucle para recorrer lis\r\n    for(const li of liElements){\r\n      li.addEventListener('click', handleClick);\r\n}};\r\n\r\n//función para renderizar personaje(foto y nombre)\r\nfunction renderCharacter(characters){\r\n  \r\n    let imageUrl = characters.imageUrl || './assets/images/imagenRepuesto.png';\r\n\r\n    let html = `<li class = \"card js_card\" id=${characters._id}>\r\n      <div class=\"character\">\r\n        <img class=\"character__img js_imgCard\" src=${characters.imageUrl} alt=\"\">\r\n        <p class=\"character__text js_textCard\">${characters.name}</p>\r\n      </div>\r\n  </li>`;\r\n  return html;\r\n};\r\n\r\n///////////////////////// LISTA DE FAVORITOS /////////////////////////////////////////////////////////////////\r\n\r\n//recojo elemento li// aádir array de favoritos y meter dentro lo que clicamos\r\nfunction handleClick (ev) {\r\n  const id = parseInt(ev.currentTarget.id);\r\n  //buscar dentro de array el primer elemento que cumple con la condicion(devuelve el contenido)\r\n  const selectedCharacter = listCharacterApi.find((item)=> item._id === id);\r\n  //devolver posición de array favoritos\r\n  const indexCharacter = listCharacterFavorite.findIndex((item)=> item._id === id);\r\n  \r\n  //validar\r\n  if( indexCharacter === -1 ){\r\n    listCharacterFavorite.push(selectedCharacter);\r\n  } else {\r\n    listCharacterFavorite.splice(indexCharacter, 0);\r\n  }\r\n  //guardar la lista en local Storage\r\n    localStorage.setItem('favorite', JSON.stringify(listCharacterFavorite));\r\n    renderFavoriteList();\r\n};\r\n\r\n// funcion añadidora de personajes a la lista de fav\r\nfunction renderFavoriteList (){\r\n  ulFavorites.innerHTML='';\r\n  for(const fav of listCharacterFavorite){\r\n    ulFavorites.innerHTML += renderCharacter(fav);\r\n  }\r\n};\r\n\r\n/////////////////////////////////BUSCADOR///////////////////////////////////////////////////////////////////////\r\n\r\nconst handleClickSearch = (ev) => {\r\n  ev.preventDefault();\r\n  const inputValue = inputSearch.value;\r\n  const filterList = listCharacterApi.filter((item)=>\r\n    item.name.toLowerCase().includes(inputValue.toLowerCase())\r\n  );\r\n  console.log(filterList);\r\n  renderCharacterList(filterList);\r\n};\r\n\r\nbtnSearch.addEventListener('click', handleClickSearch);","'use strict';\n\n"]}